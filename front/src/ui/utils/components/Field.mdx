import { Canvas, Controls, Meta } from '@storybook/addon-docs/blocks';
import * as FieldStories from './Field.stories';
import { TextInputAtom } from '@Front/ui/atoms/Inputs/TextInputAtom/TextInputAtom';

<Meta of={FieldStories} />

# Field

A reusable, accessible field wrapper component that links an input with its label and error message for forms and UI elements.

## Purpose

The Field component is designed to:

- Receive an input component and render it with proper accessibility attributes
- Link the input with a label using proper HTML associations
- Display error messages with appropriate ARIA attributes
- Manage IDs automatically or accept custom IDs
- Ensure accessibility compliance (WCAG 2.2 AA and RGAA 4)

## Usage

```tsx
<Field input={TextInputAtom} label="Username" error="This field is required" required className="custom-class" />
```

## Props

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Required</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <code>input</code>
      </td>
      <td>
        <code>React.ElementType</code>
      </td>
      <td>
        <strong>Yes</strong>
      </td>
      <td>The input component to render (e.g., TextInputAtom, TextareaAtom)</td>
    </tr>
    <tr>
      <td>
        <code>label</code>
      </td>
      <td>
        <code>ReactNode</code>
      </td>
      <td>No</td>
      <td>The label text or content to display for the input field</td>
    </tr>
    <tr>
      <td>
        <code>error</code>
      </td>
      <td>
        <code>ReactNode</code>
      </td>
      <td>No</td>
      <td>Error message to display below the input. Automatically sets aria-invalid and aria-describedby</td>
    </tr>
    <tr>
      <td>
        <code>required</code>
      </td>
      <td>
        <code>boolean</code>
      </td>
      <td>No</td>
      <td>Marks the field as required and displays a visual indicator</td>
    </tr>
    <tr>
      <td>
        <code>id</code>
      </td>
      <td>
        <code>string</code>
      </td>
      <td>No</td>
      <td>Custom ID for the input. If not provided, an ID is automatically generated</td>
    </tr>
    <tr>
      <td>
        <code>className</code>
      </td>
      <td>
        <code>string</code>
      </td>
      <td>No</td>
      <td>Additional CSS class(es) to apply to the field wrapper</td>
    </tr>
    <tr>
      <td>
        <code>defaultClassName</code>
      </td>
      <td>
        <code>string</code>
      </td>
      <td>No</td>
      <td>Default CSS class for the wrapper (defaults to "ds-field")</td>
    </tr>
    <tr>
      <td>
        <code>...props</code>
      </td>
      <td>
        <code>ComponentProps&lt;ComponentType&gt;</code>
      </td>
      <td>No</td>
      <td>All props are passed through to the input component (e.g., value, onChange, placeholder, name)</td>
    </tr>
  </tbody>
</table>

## Accessibility

- **WCAG 2.2 AA & RGAA 4 Compliant**: Follows accessibility best practices
- **Automatic ID Management**: Links label to input using the `for` and `id` attributes
- **Error Handling**: Uses `aria-invalid` and `aria-describedby` to announce errors to screen readers
- **Required Fields**: Properly marks required fields for assistive technologies
- **Keyboard Accessible**: All interactions work with keyboard navigation

## Examples

### Basic Field with Label

```tsx
<Field input={TextInputAtom} label="Email Address" placeholder="Enter your email" />
```

### Field with Error

```tsx
<Field input={TextInputAtom} label="Email Address" error="Invalid email format" placeholder="Enter your email" />
```

### Required Field

```tsx
<Field input={TextInputAtom} label="Username" required placeholder="Choose a username" />
```

### Field with Custom Styling

```tsx
<Field input={TextInputAtom} label="Custom Field" className="my-custom-class" placeholder="Enter value" />
```

## Playground

<Canvas of={FieldStories.Default} sourceState="shown" />
<Controls of={FieldStories.Default} />
